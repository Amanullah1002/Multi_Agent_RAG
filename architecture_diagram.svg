<svg width="900" height="620" xmlns="http://www.w3.org/2000/svg" font-family="monospace, sans-serif">

  <!-- Background -->
  <rect width="900" height="620" fill="#0f1117" rx="12"/>

  <!-- Title -->
  <text x="450" y="38" text-anchor="middle" fill="#e2e8f0" font-size="18" font-weight="bold">Multi-Agent RAG System â€” Architecture</text>

  <!-- â”€â”€ USER QUERY â”€â”€ -->
  <rect x="340" y="60" width="220" height="44" rx="8" fill="#1e293b" stroke="#38bdf8" stroke-width="1.5"/>
  <text x="450" y="87" text-anchor="middle" fill="#38bdf8" font-size="13" font-weight="bold">User Query (CLI)</text>

  <!-- Arrow down to Orchestrator -->
  <line x1="450" y1="104" x2="450" y2="128" stroke="#64748b" stroke-width="1.5" marker-end="url(#arr)"/>

  <!-- â”€â”€ ORCHESTRATOR â”€â”€ -->
  <rect x="240" y="128" width="420" height="60" rx="8" fill="#1e3a5f" stroke="#38bdf8" stroke-width="1.5"/>
  <text x="450" y="152" text-anchor="middle" fill="#38bdf8" font-size="13" font-weight="bold">Orchestrator</text>
  <text x="450" y="172" text-anchor="middle" fill="#94a3b8" font-size="11">Query decomposition  â€¢  Heuristic routing  â€¢  Parallel dispatch</text>

  <!-- Arrows from orchestrator to 4 agents -->
  <line x1="290" y1="188" x2="120" y2="248" stroke="#64748b" stroke-width="1.5" marker-end="url(#arr)"/>
  <line x1="380" y1="188" x2="320" y2="248" stroke="#64748b" stroke-width="1.5" marker-end="url(#arr)"/>
  <line x1="520" y1="188" x2="580" y2="248" stroke="#64748b" stroke-width="1.5" marker-end="url(#arr)"/>
  <line x1="610" y1="188" x2="780" y2="248" stroke="#64748b" stroke-width="1.5" marker-end="url(#arr)"/>

  <!-- â”€â”€ AGENT A â”€â”€ -->
  <rect x="40" y="248" width="160" height="80" rx="8" fill="#14532d" stroke="#4ade80" stroke-width="1.5"/>
  <text x="120" y="272" text-anchor="middle" fill="#4ade80" font-size="12" font-weight="bold">Agent A</text>
  <text x="120" y="289" text-anchor="middle" fill="#86efac" font-size="11">RAG Retriever</text>
  <text x="120" y="307" text-anchor="middle" fill="#6b7280" font-size="10">FAISS vector search</text>
  <text x="120" y="321" text-anchor="middle" fill="#6b7280" font-size="10">7 policy documents</text>

  <!-- â”€â”€ AGENT B â”€â”€ -->
  <rect x="240" y="248" width="160" height="80" rx="8" fill="#1e3a5f" stroke="#60a5fa" stroke-width="1.5"/>
  <text x="320" y="272" text-anchor="middle" fill="#60a5fa" font-size="12" font-weight="bold">Agent B</text>
  <text x="320" y="289" text-anchor="middle" fill="#93c5fd" font-size="11">SQL Agent</text>
  <text x="320" y="307" text-anchor="middle" fill="#6b7280" font-size="10">SQLite â€¢ SELECT only</text>
  <text x="320" y="321" text-anchor="middle" fill="#6b7280" font-size="10">Schema validation</text>

  <!-- â”€â”€ AGENT D â”€â”€ -->
  <rect x="500" y="248" width="160" height="80" rx="8" fill="#451a03" stroke="#fb923c" stroke-width="1.5"/>
  <text x="580" y="272" text-anchor="middle" fill="#fb923c" font-size="12" font-weight="bold">Agent D</text>
  <text x="580" y="289" text-anchor="middle" fill="#fdba74" font-size="11">Web Search</text>
  <text x="580" y="307" text-anchor="middle" fill="#6b7280" font-size="10">External knowledge</text>
  <text x="580" y="321" text-anchor="middle" fill="#6b7280" font-size="10">Mocked / Tavily</text>

  <!-- â”€â”€ AGENT E â”€â”€ -->
  <rect x="700" y="248" width="160" height="80" rx="8" fill="#3b0764" stroke="#c084fc" stroke-width="1.5"/>
  <text x="780" y="272" text-anchor="middle" fill="#c084fc" font-size="12" font-weight="bold">Agent E</text>
  <text x="780" y="289" text-anchor="middle" fill="#d8b4fe" font-size="11">Reasoning (LLM)</text>
  <text x="780" y="307" text-anchor="middle" fill="#6b7280" font-size="10">Groq â€¢ allam-2-7b</text>
  <text x="780" y="321" text-anchor="middle" fill="#6b7280" font-size="10">No tools, prior knowledge</text>

  <!-- Arrows from agents to synthesizer -->
  <line x1="120" y1="328" x2="370" y2="398" stroke="#64748b" stroke-width="1.5" marker-end="url(#arr)"/>
  <line x1="320" y1="328" x2="400" y2="398" stroke="#64748b" stroke-width="1.5" marker-end="url(#arr)"/>
  <line x1="580" y1="328" x2="500" y2="398" stroke="#64748b" stroke-width="1.5" marker-end="url(#arr)"/>
  <line x1="780" y1="328" x2="530" y2="398" stroke="#64748b" stroke-width="1.5" marker-end="url(#arr)"/>

  <!-- â”€â”€ AGENT C â”€â”€ -->
  <rect x="280" y="398" width="340" height="64" rx="8" fill="#1c1917" stroke="#fbbf24" stroke-width="1.5"/>
  <text x="450" y="422" text-anchor="middle" fill="#fbbf24" font-size="13" font-weight="bold">Agent C â€” Answer Synthesizer</text>
  <text x="450" y="442" text-anchor="middle" fill="#d4a017" font-size="11">Grounded answer  â€¢  Citation enforcement  â€¢  Source priority: DB > Docs > Web > LLM</text>
  <text x="450" y="456" text-anchor="middle" fill="#6b7280" font-size="10">Chunk ID whitelist  â€¢  Hallucination guard  â€¢  clean_references()</text>

  <!-- Arrow down to output -->
  <line x1="450" y1="462" x2="450" y2="492" stroke="#64748b" stroke-width="1.5" marker-end="url(#arr)"/>

  <!-- â”€â”€ FINAL ANSWER + LOG â”€â”€ -->
  <rect x="240" y="492" width="420" height="44" rx="8" fill="#1e293b" stroke="#38bdf8" stroke-width="1.5"/>
  <text x="450" y="512" text-anchor="middle" fill="#e2e8f0" font-size="12" font-weight="bold">Final Answer (CLI)  +  Execution Log (JSON)</text>
  <text x="450" y="528" text-anchor="middle" fill="#64748b" font-size="10">execution_logs/log_TIMESTAMP_query.json</text>

  <!-- Arrow to feedback -->
  <line x1="450" y1="536" x2="450" y2="560" stroke="#64748b" stroke-width="1.5" marker-end="url(#arr)"/>

  <!-- â”€â”€ FEEDBACK MEMORY â”€â”€ -->
  <rect x="300" y="560" width="300" height="44" rx="8" fill="#1a1a2e" stroke="#818cf8" stroke-width="1.5"/>
  <text x="450" y="580" text-anchor="middle" fill="#818cf8" font-size="12" font-weight="bold">Feedback Memory  (Section 4)</text>
  <text x="450" y="596" text-anchor="middle" fill="#6b7280" font-size="10">ğŸ‘ good / ğŸ‘ bad  â€¢  Cosine similarity  â€¢  Re-ranks future retrieval</text>

  <!-- Feedback loop back to Agent A -->
  <path d="M 300 582 Q 60 582 60 248" fill="none" stroke="#818cf8" stroke-width="1" stroke-dasharray="5,4" marker-end="url(#arr-purple)"/>
  <text x="32" y="430" fill="#818cf8" font-size="9" transform="rotate(-90, 32, 430)">reputation boost</text>

  <!-- â”€â”€ DATA SOURCES BOX â”€â”€ -->
  <rect x="10" y="358" width="180" height="32" rx="6" fill="#0f1117" stroke="#374151" stroke-width="1"/>
  <text x="100" y="374" text-anchor="middle" fill="#6b7280" font-size="10">ğŸ“„ 7 policy .txt files</text>
  <text x="100" y="386" text-anchor="middle" fill="#6b7280" font-size="10">ğŸ—„  company.db (SQLite)</text>

  <!-- Arrow markers -->
  <defs>
    <marker id="arr" markerWidth="8" markerHeight="8" refX="6" refY="3" orient="auto">
      <path d="M0,0 L0,6 L8,3 z" fill="#64748b"/>
    </marker>
    <marker id="arr-purple" markerWidth="8" markerHeight="8" refX="6" refY="3" orient="auto">
      <path d="M0,0 L0,6 L8,3 z" fill="#818cf8"/>
    </marker>
  </defs>

  <!-- Legend -->
  <rect x="660" y="430" width="220" height="110" rx="6" fill="#1e293b" stroke="#374151" stroke-width="1"/>
  <text x="770" y="448" text-anchor="middle" fill="#94a3b8" font-size="11" font-weight="bold">Routing Rules</text>
  <text x="672" y="464" fill="#4ade80" font-size="10">â— policy/lta/leave/wfh  â†’ A</text>
  <text x="672" y="480" fill="#60a5fa" font-size="10">â— how many/list/count  â†’ B</text>
  <text x="672" y="496" fill="#fb923c" font-size="10">â— market/trend/global  â†’ D</text>
  <text x="672" y="512" fill="#c084fc" font-size="10">â— what is/explain/define â†’ E</text>
  <text x="672" y="528" fill="#fbbf24" font-size="10">â— policy + count       â†’ A+B</text>
  <text x="672" y="544" fill="#94a3b8" font-size="10">â— policy + industry    â†’ A+D</text>

</svg>
